export default function scrollAnimation(e){function t(e){return.01*window.innerHeight*e}function r(e){let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX}}const o=document.querySelector("html"),i=document.querySelectorAll(".hero__decor_element"),s=document.querySelector(".header"),n=document.querySelector(".hero"),a=document.querySelector(".hero__title"),l=document.querySelector(".hero__mob_title"),c=document.querySelector(".hero__text"),d=document.querySelector(".loader"),p=document.querySelector(".cases"),g=document.querySelector(".cases__inner"),u=document.querySelector(".simplebar-content-wrapper");let m=gsap.matchMedia(),h=[];document.querySelectorAll(".pill__decor").forEach(e=>{const t=Number(e.dataset.length);for(let r=0;r<t;r++){let t=String(r+1).padStart(4,"0");e.insertAdjacentHTML("beforeend",`\n\t\t\t\t<picture>\n\t\t\t\t\t<source srcset="img/animation-sequence/${t}.avif" type="image/avif">\n\t\t\t\t\t<source srcset="img/animation-sequence/${t}.webp" type="image/webp">\n\t\t\t\t\t<img src="img/animation-sequence/${t}.png" alt="" width="0" height="0">\n\t\t\t\t</picture>\n\t\t\t`),h.push(e.querySelectorAll("img")[r])}}),m.add("(min-width: 992px)",()=>{let e=gsap.timeline(),t=gsap.timeline(),r=gsap.timeline(),l=gsap.timeline(),m=gsap.timeline(),y=gsap.timeline();gsap.set(".header",{"--y":"0%"});const b=gsap.from(".header",{"--y":"-100%",paused:!0,duration:.1}).progress(1);function w(){if(window.innerWidth>=992){ScrollTrigger.killAll(),gsap.set(".header",{transform:"translate3d(0,0,0)"}),ScrollTrigger.create({start:"top top",end:"max",scroller:u,onUpdate:e=>{-1===e.direction?b.play():b.reverse(),0==e.progress?s.classList.add("on-top"):s.classList.remove("on-top")}}),e.kill(),e=gsap.timeline(),e.pause();let w=!0;ScrollTrigger.create({trigger:"#hero-scene",start:"top top",end:`+=${2*window.innerHeight} top`,scrub:!0,pin:!0,pinSpacer:!1,pinSpacing:!1,animation:e,scroller:u,onUpdate:e=>{w&&e.progress>=.7?(w=!1,document.body.classList.add("is-light")):!w&&e.progress<=.65&&(w=!0,document.body.classList.remove("is-light"))}}),e.to([a,d,c],{opacity:.1,duration:2}),e.fromTo(i[0],{"--y":"0%","--x":"38%","--scale":"1"},{"--x":"0%","--y":"50%","--scale":"1.1",duration:2},"-=1"),e.fromTo(i[1],{"--y":"11%","--x":"-47%","--scale":"1"},{"--x":"-20%","--y":"-10%","--scale":"1.1",duration:2},"-=2"),e.to(i[0],{"--x":"0%","--y":"50%","--scale":"1.1",duration:1}),e.to(i[1],{"--x":"-20%","--y":"-10%","--scale":"1.1",duration:1},"-=1"),e.to(i[0],{"--x":"500%","--y":"5%","--scale":"6.5",duration:3,ease:"power3.inOut"}),e.to(i[1],{"--x":"-100%","--y":"50%","--scale":"6.5",duration:3,ease:"power3.inOut"},"-=3"),e.to([a,d,c],{opacity:0,duration:3},"-=3"),e.to([d,n],{visibility:"hidden",duration:0}),e.fromTo(o,{"--background-color":"rgb(3,3,4)","--theme-color-1":"rgb(245,248,255)","--theme-color-1-reverse":"rgb(3,3,4)","--theme-color-2":"rgb(255,255,255)","--theme-color-2-reverse":"rgb(0,0,0)",duration:3,ease:"power2.inOut"},{duration:3,ease:"power3.inOut","--background-color":"rgb(245,248,255)","--theme-color-1":"rgb(3,3,4)","--theme-color-1-reverse":"rgb(245,248,255)","--theme-color-2":"rgb(0,0,0)","--theme-color-2-reverse":"rgb(255,255,255)"},"-=4"),ScrollTrigger.create({trigger:p,start:"top top",scroller:u}),t.kill(),t=gsap.timeline({scrollTrigger:{trigger:"#cases-scene",start:"center center",end:"+="+g.scrollWidth,scrub:!0,pin:!0,pinSpacing:!0,scroller:u}}),t.pause(),t.fromTo(".cases__hero",{transform:"translate3d(0,100%,0) scale(0.5)"},{transform:"translate3d(0,0,0) scale(1)",duration:2,ease:"power2.inOut"}),t.to(".cases__inner",{transform:`translate3d(-${p.scrollWidth-window.innerWidth}px,0,0)`,duration:15,ease:"linear"});const v=document.querySelector(".anim_title"),f=document.querySelector(".anim_title__value").querySelectorAll("div");r.kill(),r=gsap.timeline({scrollTrigger:{trigger:v,start:"top bottom",end:"bottom top",scrub:!0,scroller:u}}),r.pause(),r.to(f[0],{transform:"translate3d(0,0,0)",duration:2,ease:"power3.inOut"}),r.to(f[1],{transform:"translate3d(0,0,0)",duration:2,ease:"power3.inOut"},"-=2"),r.to(f[0],{transform:"translate3d(100%,0,0)",duration:2,ease:"power3.inOut"}),r.to(f[1],{transform:"translate3d(-100%,0,0)",duration:2,ease:"power3.inOut"},"-=2"),r.to(p,{opacity:0,visibility:"hidden",duration:0}),l.kill(),l=gsap.timeline({defaults:{ease:"linear"},scrollTrigger:{trigger:"#services-scene",start:"top top",end:`+=${window.innerHeight} top`,scrub:!0,scroller:u}}),l.pause();const _=document.querySelector(".our_expertise__title"),S=document.querySelector(".our_expertise__images").querySelectorAll(".our_expertise__images_item"),x=document.querySelector(".our_expertise__list"),q=x.querySelectorAll(".our_expertise__item");l.to(_,{opacity:0,duration:2}),l.to(_,{opacity:0,duration:1}),ScrollTrigger.create({trigger:".our_expertise__hero",start:"top top",end:`=+${window.innerHeight} top`,scrub:!0,pin:!0,pinSpacer:!1,scroller:u}),ScrollTrigger.create({trigger:".our_expertise__images",start:"top top",end:`=+${x.offsetHeight-window.innerHeight} top`,scrub:!0,pin:!0,pinSpacer:!1,scroller:u}),q.forEach((e,t)=>{ScrollTrigger.create({trigger:e,start:"top center",end:"top center",scroller:u,onEnter:()=>{S.forEach((e,t)=>{e.classList.remove("is-active")}),S[t].classList.add("is-active")},onEnterBack:()=>{S.forEach((e,t)=>{e.classList.remove("is-active")}),S[Math.max(t-2,0)].classList.remove("is-active"),S[Math.max(t-1,0)].classList.add("is-active")}})});const T=document.querySelector(".pill"),L=T.querySelector(".pill__title"),k=T.querySelectorAll(".pill__title.visible-on-desktop > *")[0],O=T.querySelectorAll(".pill__title.visible-on-desktop > *")[1],H=T.querySelector(".pill__decor");ScrollTrigger.create({trigger:T,start:"top top",scroller:u,onEnter:()=>{document.body.classList.remove("is-light")},onLeaveBack:()=>{document.body.classList.add("is-light")}}),ScrollTrigger.create({trigger:"#pill-scene",start:`+=${window.innerHeight/2} top`,end:1.5*window.innerHeight+" top",scroller:u,onEnter:()=>{document.body.classList.remove("is-light")},onLeaveBack:()=>{document.body.classList.add("is-light")},onUpdate:e=>{h.map((t,r)=>{(r+1)/h.length<e.progress&&(h.map((e,t)=>{t!=r&&e.style.removeProperty("visibility")}),t.style.visibility="visible")})}}),m.kill(),m=gsap.timeline({defaults:{ease:"power1.inOut"},scrollTrigger:{trigger:"#pill-scene",start:"top top",end:2*window.innerHeight+" top",scrub:!0,pin:!0,pinSpacing:!1,scroller:u}}),m.pause(),gsap.set(L,{transform:"rotate(0deg) scale(0.5)"}),m.to(o,{duration:1,"--background-color":"rgb(3,3,4)","--theme-color-1":"rgb(245,248,255)","--theme-color-1-reverse":"rgb(3,3,4)","--theme-color-2":"rgb(255,255,255)","--theme-color-2-reverse":"rgb(0,0,0)"}),m.to(H,{transform:"scale(1) translate3d(0,0,0)",duration:2}),m.to(L,{visibility:"visible",duration:1},"-=1"),m.to(L,{transform:"translate3d(0,0,0) scale(0.5) rotate(-25deg)",duration:1},"-=2"),m.to(H,{transform:"scale(2) translate3d(0,0,0)",duration:2},"-=1"),m.to(L,{transform:"translate3d(0,0,0) scale(1) rotate(0deg)",duration:2},"-=2"),y.kill(),y=gsap.timeline({defaults:{ease:"power1.inOut"},scrollTrigger:{trigger:".feedback",start:`=-${window.innerHeight} top`,end:"top top",scrub:!0,scroller:u}}),y.pause(),y.to(k,{transform:`translate3d(-${window.innerWidth}px,0,0)`,duration:2}),y.to(O,{transform:`translate3d(${window.innerWidth}px,0,0)`,duration:2},"-=2")}}w(),window.addEventListener("resize",w)}),m.add("(max-width: 991px)",()=>{gsap.set(".header",{"--y":"0%"});const a=gsap.from(".header",{"--y":"-100%",paused:!0}).progress(1);let g=0,u=gsap.timeline(),m=gsap.timeline(),y=gsap.timeline();const b=document.querySelector("#hero-scene");function w(){if(g!=window.innerWidth&&window.innerWidth<=991){g=window.innerWidth,ScrollTrigger.killAll(),gsap.set(e.loader,{left:"50%",top:r(l).top-e.loader.offsetHeight+"px"}),ScrollTrigger.create({start:"top top",end:"max",onUpdate:e=>{-1===e.direction?a.play():a.reverse(),0==e.progress?s.classList.add("on-top"):s.classList.remove("on-top")}}),u.kill(),u=gsap.timeline(),u.pause();let w=!0;ScrollTrigger.create({trigger:".hero",start:"top top",end:`+=${2*window.innerHeight} top`,scrub:!0,pin:!0,pinSpacer:!1,pinSpacing:!1,animation:u,onUpdate:e=>{w&&e.progress>=.7?(w=!1,document.body.classList.add("is-light"),b.style.pointerEvents="none"):!w&&e.progress<=.6&&(w=!0,document.body.classList.remove("is-light"),b.style.removeProperty("pointer-events"))}}),u.to([l,d,c],{opacity:.2,duration:2}),u.fromTo(i[0],{"--y":t(10)+"px","--x":"12vw","--scale":"1"},{"--y":t(35)+"px","--x":"0","--scale":"1.1",duration:2},"-=1"),u.fromTo(i[1],{"--y":"-5px","--x":"-20%","--scale":"1"},{"--y":`-${t(30)}px`,"--x":"-5%","--scale":"1.1",duration:2},"-=2"),u.to(i[0],{"--y":t(15)+"px","--x":"550%","--scale":"6.5",duration:3,ease:"power3.inOut"}),u.to(i[1],{"--y":t(30)+"px","--x":"-250%","--scale":"6.5",duration:3,ease:"power3.inOut"},"-=3"),u.to([l,d,c],{opacity:0,duration:3},"-=3"),u.to([d,n],{visibility:"hidden",duration:0}),u.fromTo(o,{"--background-color":"rgb(3,3,4)","--theme-color-1":"rgb(245,248,255)","--theme-color-1-reverse":"rgb(3,3,4)","--theme-color-2":"rgb(255,255,255)","--theme-color-2-reverse":"rgb(0,0,0)",duration:3,ease:"power2.inOut"},{duration:3,ease:"power3.inOut","--background-color":"rgb(245,248,255)","--theme-color-1":"rgb(3,3,4)","--theme-color-1-reverse":"rgb(245,248,255)","--theme-color-2":"rgb(0,0,0)","--theme-color-2-reverse":"rgb(255,255,255)"},"-=4"),ScrollTrigger.create({trigger:p,start:"top top",onEnter:e=>{},onLeaveBack:e=>{}});const v=document.querySelector(".anim_title"),f=document.querySelector(".anim_title__value").querySelectorAll("div");m.kill(),m=gsap.timeline({scrollTrigger:{trigger:v,start:"top bottom",end:"bottom top",scrub:!0}}),m.pause(),m.to(f[0],{transform:"translate3d(0,0,0)",duration:2,ease:"power3.inOut"}),m.to(f[1],{transform:"translate3d(0,0,0)",duration:2,ease:"power3.inOut"},"-=2"),m.to(f[0],{transform:"translate3d(100%,0,0)",duration:2,ease:"power3.inOut"}),m.to(f[1],{transform:"translate3d(-100%,0,0)",duration:2,ease:"power3.inOut"},"-=2");const _=document.querySelector(".pill"),S=_.querySelectorAll(".pill__title"),x=_.querySelector(".pill__decor");ScrollTrigger.create({trigger:_,start:"top top",onEnter:e=>{document.body.classList.remove("is-light")},onLeaveBack:e=>{document.body.classList.add("is-light"),x.style.visibility="hidden"}}),ScrollTrigger.create({trigger:"#pill-scene",start:`+=${window.innerHeight/2} top`,end:1.5*window.innerHeight+" top",onUpdate:e=>{0==e.progress&&h.map((e,t)=>{e.style.removeProperty("visibility")}),h.map((t,r)=>{(r+1)/h.length<e.progress&&(h.map((e,t)=>{t!=r&&e.style.removeProperty("visibility")}),t.style.visibility="visible")})}}),y.kill(),y=gsap.timeline({defaults:{ease:"power1.inOut"},scrollTrigger:{trigger:"#pill-scene",start:"top top",end:2*window.innerHeight+" top",scrub:!0,pin:!0,pinSpacing:!1}}),y.pause(),gsap.set(S,{transform:"rotate(0deg) scale(0.5)"}),y.to(o,{duration:1,"--background-color":"rgb(3,3,4)","--theme-color-1":"rgb(245,248,255)","--theme-color-1-reverse":"rgb(3,3,4)","--theme-color-2":"rgb(0,0,0)","--theme-color-2-reverse":"rgb(255,255,255)"}),y.to(x,{transform:"scale(1) translate3d(0,0,0)",duration:2}),y.to(S,{visibility:"visible",duration:1},"-=1"),y.to(S,{transform:"translate3d(0,0,0) scale(0.5) rotate(-25deg)",duration:1},"-=2"),y.to(x,{transform:"scale(2) translate3d(0,0,0)",duration:2},"-=1"),y.to(S,{transform:"translate3d(0,0,0) scale(1) rotate(0deg)",duration:2},"-=2")}}w(),window.addEventListener("resize",w)})}