import customMouse from"./mouse.js?v=2";import scrollAnimation from"./scroll-animation.js?v=3";export default function startAnimation(e){function t(e){let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX}}!function(e,t,o){let r=function(e,t){e.q.push(t)},n=e.document;e.Cal=e.Cal||function(){let i=e.Cal,a=arguments;if(i.loaded||(i.ns={},i.q=i.q||[],n.head.appendChild(n.createElement("script")).src=t,i.loaded=!0),a[0]===o){const e=function(){r(e,arguments)},t=a[1];return e.q=e.q||[],void("string"==typeof t?(i.ns[t]=e)&&r(e,a):r(i,a))}r(i,a)}}(window,"https://app.cal.com/embed/embed.js","init"),Cal("init",{origin:"https://app.cal.com"}),Cal("inline",{elementOrSelector:"#feedback-form",calLink:"rick/get-rick-rolled"}),gsap.set(document.querySelector("html"),{"--background-color":"rgb(3,3,4)","--theme-color-1":"rgb(245,248,255)","--theme-color-1-reverse":"rgb(3,3,4)","--theme-switch":0});const o=document.querySelector("html"),r=document.querySelectorAll(".hero__decor_element"),n=document.querySelector(".hero__title"),i=document.querySelector(".hero__mob_title"),a=document.querySelector(".hero__text"),s=document.querySelector(".loader");o.style.setProperty("--load-padding",window.innerWidth-document.body.offsetWidth+"px"),history.scrollRestoration="manual",gsap.registerPlugin(ScrollTrigger),ScrollTrigger.config({ignoreMobileResize:!0});const l=gsap.timeline({duration:2,ease:"power2.inOut"});l.pause();let c=gsap.matchMedia();c.add("(min-width: 992px)",()=>{history.scrollRestoration="manual";const t=document.querySelector(".body_wrapper");new SimpleBar(t,{autoHide:!1});const i=document.querySelector(".simplebar-content-wrapper");let c;i.scrollTop=0,i.style.overflow="hidden",setTimeout(()=>{c=new Lenis({wrapper:document.querySelector(".simplebar-content-wrapper"),content:document.querySelector(".simplebar-content")})},500),document.querySelectorAll(".split-lines").forEach(e=>{new SplitType(e,{types:"lines"})}),gsap.set(n,{"--x-1":"120%","--x-2":"-120%","--x-3":"120%"}),gsap.set(r[0],{"--y":"-150%","--x":"108%"}),gsap.set(r[1],{"--y":"150%","--x":"-80%"}),gsap.set(a,{"--x":"200%"}),l.to(s,{left:"77vw",duration:2,ease:"power2.inOut",onStart:()=>{e.header.classList.add("is-loaded")}},"-=1"),l.to(r[0],{"--y":"0%","--x":"38%",duration:2,ease:"power2.inOut"},"-=2.5"),l.to(r[1],{"--y":"11%","--x":"-47%",duration:2,ease:"power2.inOut"},"-=2.5"),l.to(n,{"--x-1":"0%","--x-2":"0%","--x-3":"0%",duration:3,ease:"power3.inOut"},"-=2.5"),l.to(a,{"--x":"0%",duration:3,ease:"power3.inOut",onComplete:()=>{setTimeout(()=>{c.destroy(),c=new Lenis({wrapper:document.querySelector(".simplebar-content-wrapper"),content:document.querySelector(".simplebar-content")}),requestAnimationFrame((function e(t){c.raf(t),requestAnimationFrame(e)})),c.on("scroll",e=>{ScrollTrigger.update()}),document.body.classList.add("is-loaded"),o.style.setProperty("--load-padding","0px"),document.querySelectorAll(".prototypes__container").forEach(e=>{new SimpleBar(e,{autoHide:!1});const t=e.querySelector(".prototypes__container_inner"),o=e.querySelector(".simplebar-content-wrapper");let r=new Lenis({wrapper:o,content:o});const n=e.querySelector(".prototypes__nav_list");t.style.setProperty("--video-y",n.getBoundingClientRect().bottom+"px"),r.on("scroll",(function(e){t.style.setProperty("--video-y",n.getBoundingClientRect().bottom+"px")}));const i=e.querySelectorAll(".prototypes__block"),a=e.querySelectorAll(".prototypes__nav_list a");a.forEach(t=>{t.addEventListener("click",o=>{o.preventDefault(),r.scrollTo(e.querySelector(t.getAttribute("href")))})}),r.on("scroll",e=>{i.forEach((e,t)=>{window.innerHeight-e.getBoundingClientRect().bottom>=0&&!e.classList.contains("is-active")?(e.classList.add("is-active"),a.forEach(e=>e.classList.remove("is-active")),a[t].classList.add("is-active")):window.innerHeight-e.getBoundingClientRect().bottom<0&&e.classList.contains("is-active")&&(e.classList.remove("is-active"),a[t].classList.remove("is-active"),a[Math.max(0,t-1)].classList.add("is-active"))})}),requestAnimationFrame((function e(t){r.raf(t),requestAnimationFrame(e)}))}),document.querySelectorAll(".header__nav_list a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=document.querySelector(e.getAttribute("href")).offsetTop;"#cases-section"==e.getAttribute("href")?c.scrollTo(o+1.8*window.innerHeight):c.scrollTo(o)})}),scrollAnimation(),customMouse()},0)}},"-=3");const d=gsap.timeline();d.pause(),gsap.set(s,{"--background-1":"270deg","--background-2":"90deg","--opacity":"0"}),window.addEventListener("load",()=>{history.scrollRestoration="manual",document.body.classList.add("is-init"),d.to(s,{"--background-1":"90deg",ease:"none",duration:1.5}),d.to(s,{"--background-2":"-90deg",duration:1,ease:"none",onStart:()=>{setTimeout(()=>{gsap.set(s,{"--opacity":"1"})},0)},onComplete:()=>{l.resume()}},"-=0.6"),d.resume(),gsap.fromTo(e.header,{"--y":"-100%",duration:2,delay:2,ease:"power2.inOut"},{"--y":"0%",duration:2,delay:2,ease:"power2.inOut"})})}),c.add("(max-width: 991px)",()=>{const o=gsap.timeline({defaults:{duration:2,ease:"power2.inOut"}});var n;o.pause(),gsap.set(document.body,{overflow:"hidden"}),gsap.set(s,{left:"50%",top:"50%"}),gsap.set(r[0],{"--y":"-150%","--x":"105%"}),gsap.set(r[1],{"--y":"100%","--x":"-100%"}),o.to(s,{left:"50%",top:t(i).top-s.offsetHeight+"px",duration:2,onStart:()=>e.header.classList.add("is-loaded")}),o.to(r[0],{"--y":(n=10,.01*window.innerHeight*n)+"px","--x":"12vw",duration:2,ease:"power2.inOut"},"-=1"),o.to(r[1],{"--y":"-5px","--x":"-20%",duration:2,ease:"power2.inOut"},"-=2"),o.to(i,{opacity:1,duration:3,ease:"power3.inOut"},"-=2.5"),o.to(a,{opacity:1,duration:3,ease:"power3.inOut",onComplete:()=>{setTimeout(()=>{document.body.classList.add("is-loaded"),document.body.style.removeProperty("overflow"),document.querySelectorAll(".header__nav_list a").forEach(o=>{o.addEventListener("click",r=>{r.preventDefault(),e.menu.forEach(e=>{e.classList.remove("is-mobile-menu-active")});const n=t(document.querySelector(o.getAttribute("href"))).top;o.getAttribute("href"),window.scrollTo({left:0,top:n-40,behavior:"smooth"})})}),scrollAnimation({loader:s})},0)}},"-=3");const l=gsap.timeline();l.pause(),gsap.set(s,{"--background-1":"270deg","--background-2":"90deg","--opacity":"0"}),window.addEventListener("load",()=>{history.scrollRestoration="manual",document.body.classList.add("is-init"),l.to(s,{"--background-1":"120deg",ease:"linear",duration:1,delay:.5}),l.to(s,{"--background-2":"-90deg",duration:1,ease:"linear",onStart:()=>{gsap.set(s,{"--opacity":"1"})},onComplete:()=>{setTimeout(()=>o.resume(),1e3)}},"-=0.3"),l.resume(),gsap.fromTo(e.header,{"--y":"-100%",duration:2,delay:2,ease:"power2.inOut"},{"--y":"0%",duration:2,delay:2,ease:"power2.inOut"})}),window.addEventListener("orientationchange",()=>{setTimeout(()=>s.style.top=t(i).top-s.offsetHeight+"px",500)})})}