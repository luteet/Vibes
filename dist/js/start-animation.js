import customMouse from"./mouse.js?v=2";import scrollAnimation from"./scroll-animation.js?v=3";export default function startAnimation(e){function t(e){let t=e.getBoundingClientRect();return{top:t.top+window.scrollY,right:t.right+window.scrollX,bottom:t.bottom+window.scrollY,left:t.left+window.scrollX}}!function(e,t,o){let r=function(e,t){e.q.push(t)},n=e.document;e.Cal=e.Cal||function(){let i=e.Cal,s=arguments;if(i.loaded||(i.ns={},i.q=i.q||[],n.head.appendChild(n.createElement("script")).src=t,i.loaded=!0),s[0]===o){const e=function(){r(e,arguments)},t=s[1];return e.q=e.q||[],void("string"==typeof t?(i.ns[t]=e)&&r(e,s):r(i,s))}r(i,s)}}(window,"https://app.cal.com/embed/embed.js","init"),Cal("init",{origin:"https://app.cal.com"}),Cal("inline",{elementOrSelector:"#feedback-form",calLink:"rick/get-rick-rolled"}),gsap.set(document.querySelector("html"),{"--background-color":"rgb(3,3,4)","--theme-color-1":"rgb(245,248,255)","--theme-color-1-reverse":"rgb(3,3,4)","--theme-switch":0});const o=document.querySelector("html"),r=document.querySelectorAll(".hero__decor_element"),n=document.querySelector(".hero__title"),i=document.querySelector(".hero__mob_title"),s=document.querySelector(".hero__text"),a=document.querySelector(".loader");o.style.setProperty("--load-padding",window.innerWidth-document.body.offsetWidth+"px"),history.scrollRestoration="manual",gsap.registerPlugin(ScrollTrigger),ScrollTrigger.config({ignoreMobileResize:!0});const l=gsap.timeline({duration:2,ease:"power2.inOut"});l.pause();let c=gsap.matchMedia();c.add("(min-width: 992px)",()=>{history.scrollRestoration="manual";const i=document.querySelector(".body_wrapper");new SimpleBar(i);const c=document.querySelector(".simplebar-content-wrapper");let d;c.scrollTop=0,c.style.overflow="hidden",setTimeout(()=>{d=new Lenis({wrapper:document.querySelector(".simplebar-content-wrapper"),content:document.querySelector(".simplebar-content")})},500),document.querySelectorAll(".split-lines").forEach(e=>{new SplitType(e,{types:"lines"})}),gsap.set(n,{"--x-1":"120%","--x-2":"-120%","--x-3":"120%"}),gsap.set(r[0],{"--y":"-150%","--x":"35%"}),gsap.set(r[1],{"--y":"150%","--x":"-45%"}),gsap.set(s,{"--x":"200%"}),l.to(a,{left:"76.5vw",duration:2,ease:"power2.inOut",onStart:()=>{e.header.classList.add("is-loaded")}},"-=1"),l.to(r[0],{"--y":"0%",duration:2,ease:"power2.inOut"},"-=2.5"),l.to(r[1],{"--y":"10%",duration:2,ease:"power2.inOut"},"-=2.5"),l.to(n,{"--x-1":"0%","--x-2":"0%","--x-3":"0%",duration:3,ease:"power3.inOut"},"-=2.5"),l.to(s,{"--x":"0%",duration:3,ease:"power3.inOut",onComplete:()=>{setTimeout(()=>{d.destroy(),d=new Lenis({wrapper:document.querySelector(".simplebar-content-wrapper"),content:document.querySelector(".simplebar-content")}),requestAnimationFrame((function e(t){d.raf(t),requestAnimationFrame(e)})),d.on("scroll",e=>{ScrollTrigger.update()}),document.body.classList.add("is-loaded"),o.style.setProperty("--load-padding","0px"),document.querySelectorAll(".prototypes__container").forEach(e=>{new SimpleBar(e);const t=e.querySelector(".prototypes__container_inner"),o=e.querySelector(".simplebar-content-wrapper");let r=new Lenis({wrapper:o,content:o});const n=e.querySelector(".prototypes__nav_list");t.style.setProperty("--video-y",n.getBoundingClientRect().bottom+"px"),r.on("scroll",(function(e){t.style.setProperty("--video-y",n.getBoundingClientRect().bottom+"px")}));const i=e.querySelectorAll(".prototypes__block"),s=e.querySelectorAll(".prototypes__nav_list a");s.forEach(t=>{t.addEventListener("click",o=>{o.preventDefault(),r.scrollTo(e.querySelector(t.getAttribute("href")))})}),r.on("scroll",e=>{i.forEach((e,t)=>{window.innerHeight-e.getBoundingClientRect().bottom>=0&&!e.classList.contains("is-active")?(e.classList.add("is-active"),s.forEach(e=>e.classList.remove("is-active")),s[t].classList.add("is-active")):window.innerHeight-e.getBoundingClientRect().bottom<0&&e.classList.contains("is-active")&&(e.classList.remove("is-active"),s[t].classList.remove("is-active"),s[Math.max(0,t-1)].classList.add("is-active"))})}),requestAnimationFrame((function e(t){r.raf(t),requestAnimationFrame(e)}))}),document.querySelectorAll(".header__nav_list a").forEach(e=>{e.addEventListener("click",o=>{o.preventDefault();const r=t(document.querySelector(e.getAttribute("href"))).top;"#cases-section"==e.getAttribute("href")?d.scrollTo(r-window.innerHeight/2):d.scrollTo(r)})}),scrollAnimation(),customMouse()},0)}},"-=3");const u=gsap.timeline();u.pause(),gsap.set(a,{"--background-1":"235deg","--background-2":"90deg","--opacity":"0"}),u.to(a,{"--background-1":"120deg",ease:"linear",duration:1,onComplete:()=>{gsap.set(a,{"--opacity":"1"}),u.pause()}}),u.resume(),window.addEventListener("load",()=>{history.scrollRestoration="manual",document.body.classList.add("is-init"),u.to(a,{"--background-2":"-90deg",duration:1.2,onComplete:()=>{l.resume()}}),setTimeout(()=>{u.resume()},500),gsap.fromTo(e.header,{"--y":"-100%",duration:2,delay:2,ease:"power2.inOut"},{"--y":"0%",duration:2,delay:2,ease:"power2.inOut"})})}),c.add("(max-width: 991px)",()=>{const o=gsap.timeline({defaults:{duration:2,ease:"power2.inOut"}});var n;o.pause(),gsap.set(document.body,{overflow:"hidden"}),gsap.set(a,{left:"50%",top:"50%"}),gsap.set(r[0],{"--y":"-150%","--x":"-105%"}),gsap.set(r[1],{"--y":"100%","--x":"100%"}),o.to(a,{left:"50%",top:t(i).top-a.offsetHeight+"px",duration:2,onStart:()=>e.header.classList.add("is-loaded")}),o.to(r[0],{"--y":(n=11.5,.01*window.innerHeight*n)+"px","--x":"1vw",duration:2,ease:"power2.inOut"},"-=1"),o.to(r[1],{"--y":"0vh","--x":"-0.5rem",duration:2,ease:"power2.inOut"},"-=2"),o.to(i,{opacity:1,duration:3,ease:"power3.inOut"},"-=2.5"),o.to(s,{opacity:1,duration:3,ease:"power3.inOut",onComplete:()=>{setTimeout(()=>{document.body.classList.add("is-loaded"),document.body.style.removeProperty("overflow"),document.querySelectorAll(".header__nav_list a").forEach(o=>{o.addEventListener("click",r=>{r.preventDefault(),e.menu.forEach(e=>{e.classList.remove("is-mobile-menu-active")});const n=t(document.querySelector(o.getAttribute("href"))).top;"#cases-section"==o.getAttribute("href")?window.scrollTo({left:0,top:n-window.innerHeight/2,behavior:"smooth"}):window.scrollTo({left:0,top:n,behavior:"smooth"})})}),scrollAnimation({loader:a})},0)}},"-=3");const l=gsap.timeline();l.pause(),gsap.set(a,{"--background-1":"235deg","--background-2":"90deg","--opacity":"0"}),l.to(a,{"--background-1":"120deg",ease:"linear",duration:1,onComplete:()=>{gsap.set(a,{"--opacity":"1"}),l.pause()}}),l.resume(),window.addEventListener("load",()=>{history.scrollRestoration="manual",document.body.classList.add("is-init"),l.to(a,{"--background-2":"-90deg",duration:1.2,ease:"linear",onComplete:()=>{o.resume()}}),setTimeout(()=>{l.resume()},500),gsap.to(e.header,{transform:"translate3d(0,0,0)",duration:2,delay:2,ease:"power2.inOut"})}),window.addEventListener("orientationchange",()=>{setTimeout(()=>a.style.top=t(i).top-a.offsetHeight+"px",500)})})}